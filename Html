<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿½æ˜Ÿå›æ†¶ç­†è¨˜æœ¬ | Fandom Memories</title>
    <link href="https://fonts.googleapis.com/css2?family=Klee+One:wght@400;600&family=Zen+Kurenaido&family=Noto+Sans+TC:wght@300;500&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.12.16/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/html-to-image@1.11.11/dist/html-to-image.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tsparticles-confetti@2.12.0/tsparticles.confetti.bundle.min.js"></script>

    <style>
        body {
            margin: 0;
            overflow-x: hidden;
            font-family: 'Noto Sans TC', sans-serif;
            background: #1a1a1a;
        }
        .font-handwriting { font-family: 'Klee One', cursive; }
        .font-zen { font-family: 'Zen Kurenaido', sans-serif; }
        
        /* æ¯›ç»ç’ƒæ•ˆæœ */
        .glass {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
        }

        .glass-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .glass-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* éš±è—æ»¾å‹•æ¢ä½†ä¿æŒåŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { motion, AnimatePresence } = FramerMotion;

        // ==========================================
        // é¡Œåº«ä½ç½®ï¼šåœ¨é€™è£¡åŠ å…¥æˆ–ä¿®æ”¹é¡Œç›®
        // ==========================================
        const promptLibrary = [
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡åœ¨è¢å¹•ä¸Šçœ‹åˆ°ä»–/å¥¹æ™‚ï¼Œå¿ƒè‡Ÿæ¼è·³ä¸€æ‹çš„ç¬é–“" },
            { category: "åˆé‡æ‚¸å‹•", text: "è½åˆ°ç¬¬ä¸€é¦–ä»–/å¥¹çš„æ­Œï¼Œåè¦†å¾ªç’°çš„é‚£å€‹ä¸‹åˆ" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¿»éä»–/å¥¹çš„è³‡æ–™ï¼Œé©šè¦ºã€ŒåŸä¾†æˆ‘å€‘æœ‰ä¸€æ¨£çš„å°ç¿’æ…£ã€çš„é©šå–œ" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡ç‚ºä»–/å¥¹ç™¼æœ‹å‹åœˆï¼Œæœ‹å‹ç•™è¨€ã€Œçµ‚æ–¼æ‡‚ä½ çš„å¿«æ¨‚ã€çš„æº«æš–" },
            { category: "åˆé‡æ‚¸å‹•", text: "çœ‹åˆ°ä»–/å¥¹çš„ç¬‘å®¹ï¼Œçªç„¶è¦ºå¾—ç•¶å¤©çš„å£å¿ƒæƒ…éƒ½è¢«æ²»ç™’äº†" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç™¼ç¾è‡ªå·±å’Œä»–/å¥¹å–œæ­¡åŒä¸€éƒ¨é›»å½±ï¼Œå¿ä¸ä½ç˜‹ç‹‚æˆªåœ–çš„æ™‚åˆ»" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡å­˜ä¸‹ä»–/å¥¹çš„ç…§ç‰‡ï¼Œè¨­æˆæ‰‹æ©Ÿå£ç´™çš„å°å¿ƒæ€" },
            { category: "åˆé‡æ‚¸å‹•", text: "è½åˆ°ä»–/å¥¹èªªçš„æŸå¥è©±ï¼Œçªç„¶æœ‰äº†ç›´é¢å›°é›£çš„å‹‡æ°£" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡å’ŒåŒå¥½åˆ†äº«å–œæ­¡çš„å¿ƒæƒ…ï¼Œå…©äººä¸€æ‹å³åˆçš„é»˜å¥‘" },
            { category: "åˆé‡æ‚¸å‹•", text: "çœ‹åˆ°ä»–/å¥¹çš„èˆŠè¦–é »ï¼Œé©šæ­ã€ŒåŸä¾†å¾é‚£æ™‚å€™å°±é€™éº¼é–ƒäº®ã€" },
            { category: "åˆé‡æ‚¸å‹•", text: "å› ç‚ºä»–/å¥¹ï¼Œç¬¬ä¸€æ¬¡ä¸»å‹•å»äº†è§£ä¸€å€‹é™Œç”Ÿçš„é ˜åŸŸ" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡å¤¢åˆ°ä»–/å¥¹ï¼Œé†’ä¾†å¾Œå˜´è§’é‚„æ›è‘—å¾®ç¬‘çš„æ¸…æ™¨" },
            { category: "åˆé‡æ‚¸å‹•", text: "çœ‹åˆ°ä»–/å¥¹ç‚ºå¤¢æƒ³åŠªåŠ›çš„æ¨£å­ï¼Œæ±ºå®šä¹Ÿè¦è®Šå¾—æ›´å¥½çš„ç¬é–“" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡è²·ä»–/å¥¹çš„å‘¨é‚Šï¼Œæ‹†åŒ…è£¹æ™‚ç·Šå¼µåˆèˆˆå¥®çš„å¿ƒæƒ…" },
            { category: "åˆé‡æ‚¸å‹•", text: "è½åˆ°ä»–/å¥¹çš„è²éŸ³ï¼Œå°±è¦ºå¾—æ•´å€‹ä¸–ç•Œéƒ½è®Šå¾—æŸ”è»Ÿäº†" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç™¼ç¾ä»–/å¥¹å’Œè‡ªå·±ä¸€æ¨£å–œæ­¡åƒæŸç¨®é›¶é£Ÿï¼Œè«åçš„è¦ªè¿‘æ„Ÿ" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡åƒåŠ ç·šä¸Šæ‡‰æ´ï¼Œå’Œæˆåƒä¸Šè¬äººä¸€èµ·å–ŠåŠ æ²¹çš„ç†±è¡€" },
            { category: "åˆé‡æ‚¸å‹•", text: "çœ‹åˆ°ä»–/å¥¹çš„çœ¼ç›ï¼Œè¦ºå¾—è£¡é¢æœ‰æ˜Ÿæ˜Ÿçš„æ‚¸å‹•" },
            { category: "åˆé‡æ‚¸å‹•", text: "å› ç‚ºä»–/å¥¹ï¼Œå­¸æœƒäº†ä½¿ç”¨å‰ªè¼¯è»Ÿé«”ï¼Œå‰ªå‡ºç¬¬ä¸€å€‹é£¯åˆ¶è¦–é »" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¬¬ä¸€æ¬¡åœ¨è¡—é ­è½åˆ°ä»–/å¥¹çš„æ­Œï¼Œåœä¸‹è…³æ­¥é§è¶³çš„æ™‚åˆ»" },
            { category: "åˆé‡æ‚¸å‹•", text: "ç¿»åˆ°ä»–/å¥¹çš„æš–å¿ƒæ¡è¨ªï¼Œé»˜é»˜æŠŠé‚£å¥è©±è¨˜åœ¨ç­†è¨˜æœ¬è£¡" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æ¯å¤©æ—©ä¸Šæ‰“é–‹æ‰‹æ©Ÿï¼Œå…ˆçœ‹ä»–/å¥¹çš„æœ€æ–°å‹•æ…‹çš„ç¿’æ…£" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "å¯«ä½œæ¥­/åŠ ç­åˆ°æ·±å¤œï¼Œè½è‘—ä»–/å¥¹çš„æ­Œå°±è¦ºå¾—ä¸å­¤å–®äº†" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æŠŠä»–/å¥¹çš„é¼“å‹µèªå¯«åœ¨ä¾¿åˆ©è²¼ä¸Šï¼Œè²¼åœ¨æ›¸æ¡Œå‰çš„å°ç´°ç¯€" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "é‡åˆ°é›£éçš„äº‹ï¼Œç¿»å‡ºä»–/å¥¹çš„ç¬‘å®¹ç…§ç‰‡ï¼Œå¿ƒæƒ…æ…¢æ…¢è®Šå¥½" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "å’Œå®¶äººåˆ†äº«ä»–/å¥¹çš„ä½œå“ï¼Œå®¶äººèªªã€Œç¢ºå¯¦å¾ˆå„ªç§€ã€çš„èªå¯" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "é¤Šæˆäº†å­˜ä»–/å¥¹çš„å¯æ„›ç¬é–“ï¼Œåšæˆè¡¨æƒ…åŒ…åˆ†äº«çš„æ¨‚è¶£" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æ¯å€‹ç¯€å‡æ—¥ï¼Œéƒ½æœƒèªçœŸçµ¦ä»–/å¥¹å¯«ä¸€å¥ç¥ç¦çš„å°å„€å¼æ„Ÿ" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "å› ç‚ºä»–/å¥¹ï¼Œé–‹å§‹é¤Šæˆæ—©ç¡æ—©èµ·çš„ç¿’æ…£ï¼Œæƒ³å’Œä»–/å¥¹ä¸€æ¨£è‡ªå¾‹" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æ”¶æ‹¾æˆ¿é–“æ™‚ï¼Œçœ‹åˆ°æ»¿ç‰†çš„æµ·å ±ï¼Œå¿ä¸ä½å‚»ç¬‘çš„æ™‚åˆ»" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "ç…®é£¯çš„æ™‚å€™è½ä»–/å¥¹çš„æ­Œï¼Œé€£èœéƒ½è®Šå¾—æ›´å¥½åƒäº†" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "å’ŒåŒå¥½ä¸€èµ·æ‰“å¡ä»–/å¥¹å»éçš„åœ°æ–¹ï¼Œæ‹ä¸‹åŒæ¬¾ç…§ç‰‡" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æŠŠä»–/å¥¹çš„åå­—å¯«åœ¨ç­†è¨˜æœ¬æ‰‰é ï¼Œç•¶æˆç§˜å¯†å‹•åŠ›" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æ¯æ¬¡çœ‹åˆ°ä»–/å¥¹èªçœŸå·¥ä½œçš„æ¨£å­ï¼Œå°±è¦ºå¾—åŠªåŠ›çœŸçš„æœƒç™¼å…‰" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "å­¸æœƒäº†ä»–/å¥¹å–œæ­¡çš„æ­Œï¼Œæ´—æ¾¡æ™‚å·å·å“¼å”±çš„è‡ªåœ¨" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "çœ‹åˆ°ä»–/å¥¹é¤Šçš„å¯µç‰©ï¼Œå¿ä¸ä½èªªã€Œå’Œä¸»äººä¸€æ¨£å¯æ„›ã€" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "å› ç‚ºä»–/å¥¹ï¼Œçµè­˜äº†ä¸€ç¾¤å¿—åŒé“åˆçš„æœ‹å‹ï¼Œä¸€èµ·è«‡å¤©èªªåœ°" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æ¯å€‹æœˆå›é¡§ä¸€æ¬¡ä»–/å¥¹çš„ä½œå“ï¼Œéƒ½æœƒæœ‰æ–°çš„ç™¼ç¾å’Œæ„Ÿå‹•" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "æŠŠä»–/å¥¹çš„ç…§ç‰‡å¸¶åœ¨éš¨èº«çš„å¡åŒ…è£¡ï¼Œç´¯çš„æ™‚å€™æ‹¿å‡ºä¾†çœ‹çœ‹" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "çœ‹åˆ°ä»–/å¥¹å–œæ­¡çš„é¡è‰²ï¼Œè²·æ±è¥¿æ™‚æœƒä¸è‡ªè¦ºåæ„›" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "ç†¬å¤œçœ‹ä»–/å¥¹çš„ç›´æ’­ï¼Œé›–ç„¶çä½†å˜´è§’ä¸€ç›´ä¸Šæš" },
            { category: "é™ªä¼´æ—¥å¸¸", text: "å› ç‚ºä»–/å¥¹ï¼Œé–‹å§‹å­¸æœƒç™¼ç¾ç”Ÿæ´»ä¸­çš„å°ç¾å¥½" }
            // æ‚¨å¯ä»¥åœ¨æ­¤è™•ç¹¼çºŒæ·»åŠ æ›´å¤šé¡Œç›®...
        ];

        // æ¨¡æ¿é…ç½®
        const themes = {
            sakura: { name: "æ«»èŠ±", bg: "linear-gradient(135deg, #fff5f5 0%, #ffd1dc 100%)", color: "#d53f8c" },
            sunflower: { name: "å‘æ—¥è‘µ", bg: "linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%)", color: "#b45309" },
            clover: { name: "å››è‘‰è‰", bg: "linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%)", color: "#2f855a" },
            rainbow: { name: "å½©è™¹", bg: "linear-gradient(135deg, #ebf8ff 0%, #e9d5ff 100%)", color: "#553c9a" },
            starry: { name: "æ˜Ÿç©º", bg: "linear-gradient(135deg, #1a202c 0%, #2d3748 100%)", color: "#e2e8f0" },
            stage: { name: "èˆå°", bg: "linear-gradient(135deg, #2d3748 0%, #4a5568 100%)", color: "#fff" },
            british: { name: "è‹±å€«", bg: "linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%)", color: "#2c5282" }
        };

        const App = () => {
            const [prompt, setPrompt] = useState(promptLibrary[0]);
            const [userInput, setUserInput] = useState("");
            const [theme, setTheme] = useState("sakura");
            const [ratio, setRatio] = useState("9/16");
            const [font, setFont] = useState("font-handwriting");
            const noteRef = useRef(null);

            // éš¨æ©ŸæŠ½å–
            const handleRandom = () => {
                const randomIndex = Math.floor(Math.random() * promptLibrary.length);
                setPrompt(promptLibrary[randomIndex]);
                confetti({ particleCount: 40, spread: 70, origin: { y: 0.8 }, colors: ['#ffb7c5', '#ffffff'] });
            };

            // å„²å­˜åœ–ç‰‡
            const handleSave = async () => {
                if (noteRef.current === null) return;
                const dataUrl = await htmlToImage.toPng(noteRef.current, { quality: 1, pixelRatio: 2 });
                const link = document.createElement('a');
                link.download = `my-idol-memory-${Date.now()}.png`;
                link.href = dataUrl;
                link.click();
            };

            return (
                <div className="min-h-screen w-full flex flex-col items-center justify-start py-10 px-4 md:px-10 transition-colors duration-500">
                    
                    {/* èƒŒæ™¯å‹•æ…‹è£é£¾ */}
                    <div className="fixed inset-0 -z-10 opacity-30 pointer-events-none">
                        <div className="absolute top-10 left-10 w-64 h-64 bg-pink-300 rounded-full blur-3xl animate-pulse"></div>
                        <div className="absolute bottom-10 right-10 w-96 h-96 bg-blue-300 rounded-full blur-3xl animate-pulse delay-700"></div>
                    </div>

                    <h1 className="text-white text-3xl font-bold mb-8 tracking-widest opacity-90">è¿½æ˜Ÿå›æ†¶ç­†è¨˜æœ¬</h1>

                    <div className="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-12 gap-10 items-start">
                        
                        {/* å·¦å´ï¼šé è¦½èˆ‡ä½œç­”å€ */}
                        <div className="lg:col-span-7 flex justify-center">
                            <motion.div 
                                id="note-capture"
                                ref={noteRef}
                                layout
                                style={{ 
                                    background: themes[theme].bg,
                                    aspectRatio: ratio === '9/16' ? '9/16' : '3/4',
                                    maxHeight: '80vh'
                                }}
                                className={`w-full max-w-[400px] shadow-2xl rounded-2xl p-8 flex flex-col justify-between relative overflow-hidden transition-all duration-700`}
                            >
                                {/* è£é£¾å…ƒç´  */}
                                <div className="absolute top-0 right-0 p-4 opacity-20 text-4xl">âœ¨</div>
                                
                                <div className="z-10">
                                    <div className="mb-6">
                                        <span 
                                            style={{ color: themes[theme].color, borderColor: themes[theme].color }}
                                            className="text-xs font-bold px-2 py-1 border rounded-full opacity-70"
                                        >
                                            #{prompt.category}
                                        </span>
                                    </div>
                                    
                                    <h2 
                                        style={{ color: themes[theme].color }}
                                        className={`text-2xl font-bold leading-relaxed mb-6 ${font}`}
                                    >
                                        {prompt.text}
                                    </h2>

                                    <textarea
                                        value={userInput}
                                        onChange={(e) => setUserInput(e.target.value)}
                                        placeholder="åœ¨æ­¤è™•å¯«ä¸‹ä½ çš„å¿ƒæƒ…..."
                                        style={{ color: themes[theme].color }}
                                        className={`w-full bg-transparent border-none focus:ring-0 text-lg resize-none placeholder:opacity-30 h-64 ${font} no-scrollbar`}
                                    />
                                </div>

                                <div className="mt-4 flex justify-between items-end z-10">
                                    <div className="opacity-40 text-xs">
                                        <p>DATE: {new Date().toLocaleDateString()}</p>
                                        <p>MEMORIES OF LOVE</p>
                                    </div>
                                    <div style={{ color: themes[theme].color }} className="font-bold opacity-60 tracking-tighter">
                                        @FandomNotes
                                    </div>
                                </div>
                            </motion.div>
                        </div>

                        {/* å³å´ï¼šæ§åˆ¶é¢æ¿ */}
                        <div className="lg:col-span-5 space-y-8">
                            
                            {/* æ ¸å¿ƒæŒ‰éˆ• */}
                            <div className="grid grid-cols-2 gap-4">
                                <button onClick={handleRandom} className="glass-btn text-white py-4 rounded-xl font-bold flex flex-col items-center">
                                    <span className="text-xl mb-1">ğŸ²</span>
                                    æŠ½å–é¡Œç›®
                                </button>
                                <button onClick={handleSave} className="glass-btn text-white py-4 rounded-xl font-bold flex flex-col items-center bg-white/20">
                                    <span className="text-xl mb-1">ğŸ’¾</span>
                                    å„²å­˜åˆ†äº«
                                </button>
                            </div>

                            {/* å­—é«”é¸æ“‡ */}
                            <div className="glass p-6 rounded-2xl">
                                <h3 className="text-white/70 text-sm mb-4">é¸æ“‡å­—é«”</h3>
                                <div className="flex gap-4">
                                    <button onClick={() => setFont('font-handwriting')} className={`flex-1 py-2 rounded-lg border transition-all ${font === 'font-handwriting' ? 'bg-white text-black border-white' : 'text-white border-white/30'}`}>
                                        æ‰‹å¯«æ¥·é«”
                                    </button>
                                    <button onClick={() => setFont('font-zen')} className={`flex-1 py-2 rounded-lg border transition-all ${font === 'font-zen' ? 'bg-white text-black border-white' : 'text-white border-white/30'}`}>
                                        æ¸…ç§€ç´°é«”
                                    </button>
                                </div>
                            </div>

                            {/* æ¯”ä¾‹é¸æ“‡ */}
                            <div className="glass p-6 rounded-2xl">
                                <h3 className="text-white/70 text-sm mb-4">åˆ†äº«æ¯”ä¾‹</h3>
                                <div className="flex gap-4">
                                    <button onClick={() => setRatio('9/16')} className={`flex-1 py-2 rounded-lg border transition-all ${ratio === '9/16' ? 'bg-white text-black border-white' : 'text-white border-white/30'}`}>
                                        ç›´å± (9:16)
                                    </button>
                                    <button onClick={() => setRatio('3/4')} className={`flex-1 py-2 rounded-lg border transition-all ${ratio === '3/4' ? 'bg-white text-black border-white' : 'text-white border-white/30'}`}>
                                        è²¼æ–‡ (3:4)
                                    </button>
                                </div>
                            </div>

                            {/* æ¨¡æ¿é¸æ“‡ */}
                            <div className="glass p-6 rounded-2xl">
                                <h3 className="text-white/70 text-sm mb-4">èƒŒæ™¯æ¨¡æ¿</h3>
                                <div className="grid grid-cols-4 gap-3">
                                    {Object.keys(themes).map(key => (
                                        <button 
                                            key={key}
                                            onClick={() => setTheme(key)}
                                            className={`h-12 rounded-lg border-2 transition-all flex items-center justify-center text-[10px] font-bold ${theme === key ? 'border-white scale-110' : 'border-transparent opacity-60'}`}
                                            style={{ background: themes[key].bg, color: themes[key].color }}
                                        >
                                            {themes[key].name}
                                        </button>
                                    ))}
                                </div>
                            </div>

                        </div>
                    </div>

                    <footer className="mt-16 text-white/30 text-sm">
                        è®“è¿½æ˜Ÿçš„æ¯ä¸€åˆ»æ‚¸å‹•éƒ½è¢«æº«æŸ”ç´€éŒ„
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
